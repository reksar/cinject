{

"version": "2.0.0",
"tasks": [
  {
    "label": "Build with MSVC x64",
    "group": {
      "kind": "build",
      "isDefault": true
    },
    "dependsOrder": "sequence",
    "dependsOn": [
      "Assembly shellcode",
      "Write shellcode.obj.h",
      "Build injector"
    ]
  },
  {
    "label": "Build test",
    "type": "shell",
    "command": "cl",
    "args": [
      "/MD",
      "/W4",
      "/EHsc",
      "/std:c++17",
      "/O2",
      "/Fobuild\\",
      "/Febuild\\",
      "test.cpp"
    ],
    "options": {
      "shell": {
        "executable": "C:\\Windows\\SysWOW64\\cmd.exe",
        "args": [
          "/D",
          "/C",
          "CALL \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Auxiliary\\Build\\vcvars64.bat\"",
          "&&"
        ]
      }
    },
    "problemMatcher": []
  },
  {
    "label": "Assembly shellcode",
    "type": "shell",
    "command": "C:\\path\\to\\nasm.exe",
    "args": [
      "-f win64",
      "-o build/shellcode.obj",
      "shellcode.asm"
    ],
    "presentation": {
      "showReuseMessage": false,
      "group": "build"
    },
    "problemMatcher": []
  },
  {
    "label": "Write shellcode.obj.h",
    "type": "shell",
    "command": "C:\\path\\to\\git\\usr\\bin\\xxd.exe",
    "args": [
      "-i",
      "shellcode.obj",
      ">",
      "..\\shellcode.obj.h"
    ],
    "options": {
      "cwd": "build"
    },
    "presentation": {
      "showReuseMessage": false,
      "group": "build"
    },
    "problemMatcher": []
  },
  {
    "label": "Build injector",
    "type": "shell",
    "command": "cl",
    "args": [
      "/Z7",
      "/MDd",
      "/W4",
      "/EHsc",
      "/std:c++17",
      "/Od",
      "/Fobuild\\",
      "/Febuild\\",
      "injector.cpp"
    ],
    "options": {
      "shell": {
        "executable": "C:\\Windows\\SysWOW64\\cmd.exe",
        "args": [
          "/D",
          "/C",
          "CALL \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Auxiliary\\Build\\vcvars64.bat\"",
          "&&"
        ]
      }
    },
    "presentation": {
      "group": "build"
    }
  }
]

}
